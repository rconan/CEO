<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Cuda Engined Adaptive Optics &mdash; CEO 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/nature.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="CEO 1.0 documentation" href="#" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">CEO 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="cuda-engined-adaptive-optics">
<h1>Cuda Engined Adaptive Optics<a class="headerlink" href="#cuda-engined-adaptive-optics" title="Permalink to this headline">¶</a></h1>
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<p>Cuda Engined Adaptive Optics or CEO is a CUDA library for the modeling of Adaptive Optics (AO) systems in Astronomy.</p>
<p>CEO consists of a C++ API that hides most of the CUDA API. The CEO API can then be used to build AO simulations.</p>
<p>A CEO python interface has also been developed and is usually the preferred way to interact with CEO functionalities. This high level interface has been written with Cython to preserve speed.</p>
<p>All the code has been written following the literate programming methodology. This means that the code and the associated documentation are tangled together in a few source files. CEO relies on noweb to extract the code from the source files and to build the corresponding Latex documentation.</p>
<p>CEO can be downloaded from &lt;<a class="reference external" href="https://github.com/rconan/CEO">https://github.com/rconan/CEO</a>&gt;.
The C++ API is compiled with <cite>make all</cite>, the Python interface with <cite>make cython</cite> and the code documentation with <cite>make doc</cite>.</p>
<span class="target" id="module-ceo"></span><div class="section" id="source">
<h2>source<a class="headerlink" href="#source" title="Permalink to this headline">¶</a></h2>
<div class="section" id="complex-amplitude">
<h3>Complex_amplitude<a class="headerlink" href="#complex-amplitude" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.Complex_amplitude">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Complex_amplitude</tt><a class="headerlink" href="#ceo.Complex_amplitude" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent a wavefront complex amplitude</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>Source</strong> : Source</p>
<blockquote class="last">
<div><p>a CEO Source object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
</dl>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>phase</td>
<td>(float) The complex amplitude angle</td>
</tr>
<tr class="row-even"><td>amplitude</td>
<td>(float, read only) the complex amplitude magnitude</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Complex_amplitude.reset" title="ceo.Complex_amplitude.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Reset the wavefront amplitude to 1 and phase to 0 or to the given phase</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.Complex_amplitude.rms" title="ceo.Complex_amplitude.rms"><tt class="xref py py-obj docutils literal"><span class="pre">rms</span></tt></a></td>
<td>Computes the rms of the wavefront phase</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.Complex_amplitude.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Complex_amplitude.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the wavefront amplitude to 1 and phase to 0 or to the given phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>phase</strong> : cuFloatArray, optionnal</p>
<blockquote class="last">
<div><p>The GPU array the wavefront phase is reset to; default to None</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>a class for GPU host and device float data</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.Complex_amplitude.rms">
<tt class="descname">rms</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Complex_amplitude.rms" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the rms of the wavefront phase</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>units_exponent: int, optionnal</strong></p>
<blockquote>
<div><p>3 for km, 0 for meter, -2 for cm, -3 for mm, -6 for micron, -9 for nm, etc; default: 0</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">float</p>
<blockquote class="last">
<div><p>the wavefront phase rms</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="id1">
<h3>Source<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.Source">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Source</tt><a class="headerlink" href="#ceo.Source" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent an astronomical source</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>photometric_band</strong> : char</p>
<blockquote>
<div><p>The sources photometric band</p>
</div></blockquote>
<p><strong>zenith</strong> : list, tuple or numpy array, optionnal</p>
<blockquote>
<div><p>The sources zenith angles [rd], defaults to 0.</p>
</div></blockquote>
<p><strong>azimuth</strong> :  list, tuple or numpy array, optionnal</p>
<blockquote>
<div><p>The sources azimuth angles [rd], defaults to 0.</p>
</div></blockquote>
<p><strong>height</strong> : float, optionnal</p>
<blockquote>
<div><p>The sources altitude [m], defaults to infinity.</p>
</div></blockquote>
<p><strong>resolution</strong> : tuple</p>
<blockquote>
<div><p>A 2 element tuple with the sampling [n,m] in pixel of the source wavefront complex amplitude.</p>
</div></blockquote>
<p><strong>fwhm</strong> : float, optionnal</p>
<blockquote>
<div><p>The fwhm of the source intensity distribution, defaults to None.</p>
</div></blockquote>
<p><strong>rays_box_size</strong> : float, optionnal</p>
<blockquote>
<div><p>The size of the ray bundle [m], defaults to None.</p>
</div></blockquote>
<p><strong>rays_box_sampling</strong> : int, optionnal</p>
<blockquote>
<div><p>The linear sampling of the ray bundle</p>
</div></blockquote>
<p><strong>rays_origin</strong> : list, optionnal</p>
<blockquote class="last">
<div><p>A 3 element list, with the first 2 being the (x,y) origin of the ray bundle and the 3rd the ray bundle starting z coordinates</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
</pre></div>
</div>
<p>An on-axis source in K band is simply defined with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s">&quot;K&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The resolution of the source wavefront is specifed with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">n</span> <span class="o">=</span> <span class="mi">256</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s">&quot;K&quot;</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">))</span>
</pre></div>
</div>
<p>For a 20&#8221; off-axis and 10th magnitude source, zenith and azimuth are set with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="n">Source</span><span class="p">(</span><span class="s">&quot;K&quot;</span><span class="p">,</span><span class="n">zenith</span><span class="o">=</span><span class="mi">20</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">/</span><span class="mi">3600</span><span class="p">,</span><span class="n">azimuth</span><span class="o">=</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">),</span><span class="n">magnitude</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>A Laser guide star constellation of 6 sources is defined with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">zen</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">ones</span><span class="p">(</span><span class="mi">6</span><span class="p">)</span><span class="o">*</span><span class="mi">30</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">/</span><span class="mi">3600</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">azi</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span><span class="o">*</span><span class="mi">2</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lgs</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s">&quot;R&quot;</span><span class="p">,</span><span class="n">zenith</span><span class="o">=</span><span class="n">zen</span><span class="p">,</span><span class="n">azimuth</span><span class="o">=</span><span class="n">azi</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mf">90e3</span><span class="p">,</span><span class="n">resolution</span><span class="o">=</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="n">n</span><span class="p">))</span> 
</pre></div>
</div>
<p>If the source is to be used for ray tracing through an optical model like the GMT, then</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lgs</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s">&quot;R&quot;</span><span class="p">,</span><span class="n">zenith</span><span class="o">=</span><span class="n">zen</span><span class="p">,</span><span class="n">azimuth</span><span class="o">=</span><span class="n">azi</span><span class="p">,</span><span class="n">height</span><span class="o">=</span><span class="mf">90e3</span><span class="p">,</span>
<span class="go">                    rays_box_size=25.5, rays_box_sampling=n, rays_origin=[0,0,25]) </span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="82%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>n</td>
<td>(int) wavefront resolution</td>
</tr>
<tr class="row-even"><td>m</td>
<td>(int) wavefront resolution</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>(int) number of sources</td>
</tr>
<tr class="row-even"><td>zenith</td>
<td>(ndarray) zenith angle</td>
</tr>
<tr class="row-odd"><td>azimuth</td>
<td>(ndarray) azimuth angle</td>
</tr>
<tr class="row-even"><td>height</td>
<td>(float) source height</td>
</tr>
<tr class="row-odd"><td>ray</td>
<td>(Bundle) geometric ray bundle</td>
</tr>
<tr class="row-even"><td>phase</td>
<td>(cuFloatArray) wavefront phase</td>
</tr>
<tr class="row-odd"><td>wavelength</td>
<td>(float, read only) the wavelength of the source</td>
</tr>
<tr class="row-even"><td>nPhoton</td>
<td>(float, read only) number of photon</td>
</tr>
<tr class="row-odd"><td>magnitude</td>
<td>(float, write only) star magnitude</td>
</tr>
<tr class="row-even"><td>wavefront</td>
<td>(Complex_amplitude) the wavefront complex amplitude</td>
</tr>
<tr class="row-odd"><td>sphere_distance</td>
<td>(float) the distance to the reference sphere used to compute the OPD</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Source.masked" title="ceo.Source.masked"><tt class="xref py py-obj docutils literal"><span class="pre">masked</span></tt></a></td>
<td>Apply the binary mask of the telescope pupil to the source wavefront</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.Source.opd2phase" title="ceo.Source.opd2phase"><tt class="xref py py-obj docutils literal"><span class="pre">opd2phase</span></tt></a></td>
<td>Transfer the OPD from ray tracing to the wavefront phase</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Source.piston" title="ceo.Source.piston"><tt class="xref py py-obj docutils literal"><span class="pre">piston</span></tt></a></td>
<td>Get the piston corresponding to either the pupil or the segments</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.Source.reset" title="ceo.Source.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Reset the wavefront amplitude to 1 and phase to 0 and re&#8211;initialize the ray bundle</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Source.stop" title="ceo.Source.stop"><tt class="xref py py-obj docutils literal"><span class="pre">stop</span></tt></a></td>
<td>Ray tracing to the optic device acting as a stop</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.Source.trace" title="ceo.Source.trace"><tt class="xref py py-obj docutils literal"><span class="pre">trace</span></tt></a></td>
<td>Ray tracing to the optic device</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.Source.masked">
<tt class="descname">masked</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.masked" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the binary mask of the telescope pupil to the source wavefront</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>mask</strong> : Mask</p>
<blockquote class="last">
<div><p>The binary mask structure</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.Source.opd2phase">
<tt class="descname">opd2phase</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.opd2phase" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfer the OPD from ray tracing to the wavefront phase</p>
</dd></dl>

<dl class="method">
<dt id="ceo.Source.piston">
<tt class="descname">piston</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.piston" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the piston corresponding to either the pupil or the segments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>where</strong> : string, optionnal</p>
<blockquote>
<div><p>Either &#8220;pupil&#8221; for a piston on the full pupil or &#8220;segments&#8221; for pistons of each segment</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">ndarray of float</p>
<blockquote class="last">
<div><p>The vector of piston values in meters as either an N_SRC vector for &#8220;pupil&#8221; or a N_SRCx7 array for &#8220;segments&#8221;</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.GMT_MX" title="ceo.GMT_MX"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_MX</span></tt></a></dt>
<dd>a class embedding GMT M1 and M2 classes</dd>
<dt><a class="reference internal" href="#ceo.GMT_M1" title="ceo.GMT_M1"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M1</span></tt></a></dt>
<dd>a class for GMT M1 model</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gs</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s">&quot;V&quot;</span><span class="p">,</span><span class="n">rays_box_size</span><span class="o">=</span><span class="mf">25.5</span><span class="p">,</span> <span class="n">rays_box_sampling</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span> <span class="n">rays_origin</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span> 
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_MX</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span><span class="o">.</span><span class="n">propagate</span><span class="p">(</span><span class="n">gs</span><span class="p">)</span>
</pre></div>
</div>
<p>The piston over the entire pupil is obtained with:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gs</span><span class="o">.</span><span class="n">piston</span><span class="p">(</span><span class="n">where</span><span class="o">=</span><span class="s">&quot;pupil&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The 7 segment pistons are retrieved with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gs</span><span class="o">.</span><span class="n">piston</span><span class="p">(</span><span class="n">where</span><span class="o">=</span><span class="s">&quot;segments&quot;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.Source.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the wavefront amplitude to 1 and phase to 0 and re&#8211;initialize the ray bundle</p>
</dd></dl>

<dl class="method">
<dt id="ceo.Source.stop">
<tt class="descname">stop</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.stop" title="Permalink to this definition">¶</a></dt>
<dd><p>Ray tracing to the optic device acting as a stop</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>optics: GMT_M1 or GMT_M2</strong></p>
<blockquote class="last">
<div><p>The GMT mirror M1 or M2 models</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.GMT_M1" title="ceo.GMT_M1"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M1</span></tt></a></dt>
<dd>the class for GMT M1 model</dd>
<dt><a class="reference internal" href="#ceo.GMT_M2" title="ceo.GMT_M2"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M2</span></tt></a></dt>
<dd>the class for GMT M2 model</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.Source.trace">
<tt class="descname">trace</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Source.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Ray tracing to the optic device</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>optics: GMT_M1 or GMT_M2</strong></p>
<blockquote class="last">
<div><p>The GMT mirror M1 or M2 models</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.GMT_M1" title="ceo.GMT_M1"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M1</span></tt></a></dt>
<dd>the class for GMT M1 model</dd>
<dt><a class="reference internal" href="#ceo.GMT_M2" title="ceo.GMT_M2"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M2</span></tt></a></dt>
<dd>the class for GMT M2 model</dd>
</dl>
</div>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="gmtlib">
<h2>GMTLIB<a class="headerlink" href="#gmtlib" title="Permalink to this headline">¶</a></h2>
<div class="section" id="gmt-mx">
<h3>GMT_MX<a class="headerlink" href="#gmt-mx" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.GMT_MX">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">GMT_MX</tt><big>(</big><em>D</em>, <em>D_px</em>, <em>M1_radial_order=0</em>, <em>M2_radial_order=0</em><big>)</big><a class="headerlink" href="#ceo.GMT_MX" title="Permalink to this definition">¶</a></dt>
<dd><p>A class container from GMT_M1 and GMT_M2 classes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>D</strong> : float</p>
<blockquote>
<div><p>The size of the pupil plane in meter</p>
</div></blockquote>
<p><strong>D_px</strong> : int</p>
<blockquote>
<div><p>The size of the pupil plane in pixel</p>
</div></blockquote>
<p><strong>M1_radial_order</strong> : int, optionnal</p>
<blockquote>
<div><p>The largest radial order of the Zernike polynomials on M1 segments, default to 0</p>
</div></blockquote>
<p><strong>M2_radial_order</strong> : int, optionnal</p>
<blockquote class="last">
<div><p>The largest radial order of the Zernike polynomials on M2 segments, default to 0</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.GMT_M1" title="ceo.GMT_M1"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M1</span></tt></a></dt>
<dd>the class for GMT M1 model</dd>
<dt><a class="reference internal" href="#ceo.GMT_M2" title="ceo.GMT_M2"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_M2</span></tt></a></dt>
<dd>the class for GMT M2 model</dd>
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>an interface class between GPU host and device data for floats</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
</pre></div>
</div>
<p>The mandatory parameters are the size of the pupil plane in meter or in pixel</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_MX</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">256</span><span class="p">)</span>
</pre></div>
</div>
<p>If more that one source (lets say 3) is going to be propagated through the telescope:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_MX</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span> <span class="n">N_SRC</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<p>A combination of Zernike polynomials can be applied to M1 and M2 segments by specifying the largest radial order on each mirror</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_MX</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span> <span class="n">M1_radial_order</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span> <span class="n">M2_radial_order</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
</pre></div>
</div>
<p>A source is propagated (geometrically) through the telescope with the following procedure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s">&quot;R&quot;</span><span class="p">,</span><span class="n">rays_box_size</span><span class="o">=</span><span class="mf">25.5</span><span class="p">,</span><span class="n">rays_box_sampling</span><span class="o">=</span><span class="mi">256</span><span class="p">,</span><span class="n">rays_origin</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span><span class="o">.</span><span class="n">propagate</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</pre></div>
</div>
<p>and the wavefront phase is retrieved either as a 2D map cuFloatArray object with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gpu_ps2d</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">phase</span><span class="p">()</span>
</pre></div>
</div>
<p>or as a 1D vector with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">gpu_ps1d</span> <span class="o">=</span> <span class="n">src</span><span class="o">.</span><span class="n">wavefront</span><span class="o">.</span><span class="n">phase</span><span class="p">()</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>D</td>
<td>(float) The size of the pupil plane in meter</td>
</tr>
<tr class="row-even"><td>D_px</td>
<td>(int) The size of the pupil plane in pixel</td>
</tr>
<tr class="row-odd"><td>M1</td>
<td>(GMT_M1) The GMT M1 CEO class</td>
</tr>
<tr class="row-even"><td>M2</td>
<td>(GMT_M2) The GMT M2 CEO class</td>
</tr>
<tr class="row-odd"><td>sphere_radius</td>
<td>(float) The curvature radius of the ray tracing reference sphere</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_MX.calibrate" title="ceo.GMT_MX.calibrate"><tt class="xref py py-obj docutils literal"><span class="pre">calibrate</span></tt></a>(wfs,&nbsp;gs[,&nbsp;mirror,&nbsp;mode,&nbsp;stroke])</td>
<td>Calibrate the different degrees of freedom of the  mirrors</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_MX.propagate" title="ceo.GMT_MX.propagate"><tt class="xref py py-obj docutils literal"><span class="pre">propagate</span></tt></a>(src)</td>
<td>Propagate the Source object to the pupil plane conjugated to M1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_MX.reset" title="ceo.GMT_MX.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a>()</td>
<td>Reset M1 and M2 mirror segments to their original locations and shapes</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.GMT_MX.calibrate">
<tt class="descname">calibrate</tt><big>(</big><em>wfs</em>, <em>gs</em>, <em>mirror=None</em>, <em>mode=None</em>, <em>stroke=None</em><big>)</big><a class="headerlink" href="#ceo.GMT_MX.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calibrate the different degrees of freedom of the  mirrors</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>wfs</strong> : ShackHartmann</p>
<blockquote>
<div><p>The wavefront sensor</p>
</div></blockquote>
<p><strong>gs</strong> : Source</p>
<blockquote>
<div><p>The guide star</p>
</div></blockquote>
<p><strong>mirror</strong> : string</p>
<blockquote>
<div><p>The mirror label: eiher &#8220;M1&#8221; or &#8220;M2&#8221;</p>
</div></blockquote>
<p><strong>mode</strong> : string</p>
<blockquote>
<div><p>The degrees of freedom label
for M1: &#8220;global tip-tilt&#8221;, &#8220;zernike&#8221;, &#8220;Txyz&#8221;, &#8220;segment tip-tilt&#8221;
for M2: &#8220;pointing neutral&#8221;, &#8220;coma neutral&#8221;, &#8220;zernike&#8221;, &#8220;Txyz&#8221;, &#8220;segment tip-tilt&#8221;, &#8220;TT7 segment tip-tilt&#8221;</p>
</div></blockquote>
<p><strong>stroke</strong> : float</p>
<blockquote class="last">
<div><p>The amplitude of the motion</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_MX.propagate">
<tt class="descname">propagate</tt><big>(</big><em>src</em><big>)</big><a class="headerlink" href="#ceo.GMT_MX.propagate" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagate the Source object to the pupil plane conjugated to M1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>src</strong> : Source</p>
<blockquote class="last">
<div><p>The Source object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_MX.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_MX.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset M1 and M2 mirror segments to their original locations and shapes</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="segmentpistonsensor">
<h3>SegmentPistonSensor<a class="headerlink" href="#segmentpistonsensor" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.SegmentPistonSensor">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">SegmentPistonSensor</tt><big>(</big><em>gmt</em>, <em>src</em>, <em>W=1.5</em>, <em>L=1.5</em><big>)</big><a class="headerlink" href="#ceo.SegmentPistonSensor" title="Permalink to this definition">¶</a></dt>
<dd><p>A class for the GMT segment piston sensor</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gmt</strong> : GMT_MX</p>
<blockquote>
<div><p>The GMT object</p>
</div></blockquote>
<p><strong>src</strong> : Source</p>
<blockquote>
<div><p>The Source object used for piston sensing</p>
</div></blockquote>
<p><strong>W</strong> : float, optionnal</p>
<blockquote>
<div><p>The width of the lenslet; default: 1.5m</p>
</div></blockquote>
<p><strong>L</strong> : float, optionnal</p>
<blockquote class="last">
<div><p>The length of the lenslet; default: 1.5m</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.GMT_MX" title="ceo.GMT_MX"><tt class="xref py py-obj docutils literal"><span class="pre">GMT_MX</span></tt></a></dt>
<dd>a class for GMT M1 and M2 mirrors</dd>
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nPx</span> <span class="o">=</span> <span class="mi">256</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">D</span> <span class="o">=</span> <span class="mf">25.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">Source</span><span class="p">(</span><span class="s">&quot;R&quot;</span><span class="p">,</span><span class="n">rays_box_size</span><span class="o">=</span><span class="n">D</span><span class="p">,</span><span class="n">rays_box_sampling</span><span class="o">=</span><span class="n">nPx</span><span class="p">,</span><span class="n">rays_origin</span><span class="o">=</span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">0.0</span><span class="p">,</span><span class="mi">25</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_MX</span><span class="p">(</span><span class="n">D</span><span class="p">,</span><span class="n">nPx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">SPS</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">SegmentPistonSensor</span><span class="p">(</span><span class="n">gmt</span><span class="p">,</span><span class="n">src</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">src</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gmt</span><span class="o">.</span><span class="n">propagate</span><span class="p">(</span><span class="n">src</span><span class="p">)</span>
</pre></div>
</div>
<p>The piston per M1 segment is obtained with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">SPS</span><span class="o">.</span><span class="n">piston</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="n">segment</span><span class="o">=</span><span class="s">&#39;full&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The 12 differential pistons are given by</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">SPS</span><span class="o">.</span><span class="n">piston</span><span class="p">(</span><span class="n">src</span><span class="p">,</span><span class="n">segment</span><span class="o">=</span><span class="s">&#39;edge&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="3%" />
<col width="97%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>P</td>
<td>(numpy ndarray) M1 segment mask as a 7 columns array</td>
</tr>
<tr class="row-even"><td>rc</td>
<td>(float) The radius of the circle where are centered the first 6 lenslets</td>
</tr>
<tr class="row-odd"><td>rp</td>
<td>(float) The radius of the circle where are centered the last 6 lenslets</td>
</tr>
<tr class="row-even"><td>W</td>
<td>(float) The width of the lenslet</td>
</tr>
<tr class="row-odd"><td>L</td>
<td>(float) The length of the lenslet</td>
</tr>
<tr class="row-even"><td>M</td>
<td>(numpy ndarray) The mask corresponding to the 12 lenslet array as a 12 columns array</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.SegmentPistonSensor.piston" title="ceo.SegmentPistonSensor.piston"><tt class="xref py py-obj docutils literal"><span class="pre">piston</span></tt></a>(src[,&nbsp;segment])</td>
<td>Return either M1 segment piston or M1 differential piston</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.SegmentPistonSensor.piston">
<tt class="descname">piston</tt><big>(</big><em>src</em>, <em>segment='full'</em><big>)</big><a class="headerlink" href="#ceo.SegmentPistonSensor.piston" title="Permalink to this definition">¶</a></dt>
<dd><p>Return either M1 segment piston or M1 differential piston</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>src</strong> : Source</p>
<blockquote>
<div><p>The piston sensing guide star object</p>
</div></blockquote>
<p><strong>segment</strong> : string, optionnal</p>
<blockquote class="last">
<div><p>&#8220;full&#8221; for piston on the entire segments or &#8220;edge&#8221; for the differential piston between segment; default: &#8220;full&#8221;</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="imaging">
<h2>Imaging<a class="headerlink" href="#imaging" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ceo.Imaging">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Imaging</tt><a class="headerlink" href="#ceo.Imaging" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates an imaging object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>N_PX_PUPIL</strong> : int</p>
<blockquote>
<div><p>The sampling in pixel of one lenslet.</p>
</div></blockquote>
<p><strong>N_SIDE_LENSLET</strong> : int</p>
<blockquote>
<div><p>The linear size of the lenslet array (&gt;=1).</p>
</div></blockquote>
<p><strong>DFT_osf</strong> : int</p>
<blockquote>
<div><p>The oversampling factor for the Discrete Fourier Transform (&gt;=1).</p>
</div></blockquote>
<p><strong>N_PX_IMAGE</strong> : int</p>
<blockquote>
<div><p>The sampling in pixel of the imagelet (&gt;=1).</p>
</div></blockquote>
<p><strong>BIN_IMAGE</strong> : int</p>
<blockquote>
<div><p>The binning factor of the imagelet (&gt;=1).</p>
</div></blockquote>
<p><strong>N_SOURCE</strong> : int</p>
<blockquote class="last">
<div><p>The number of guide stars (&gt;=1).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>class acting as the interface between GPU host and device</dd>
</dl>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>frame</td>
<td>(cuFloatArray) The detector frame of size [<cite>N_SOURCE`x`N_PX_CAMERA</cite>,`N_PX_CAMERA`]</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">propagate</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">propagateThroughFieldStop</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">propagateThroughPyramid</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">readOut</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="centroiding">
<h2>Centroiding<a class="headerlink" href="#centroiding" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ceo.Centroiding">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Centroiding</tt><a class="headerlink" href="#ceo.Centroiding" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a centroiding container</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>N_SIDE_LENSLET</strong> : int</p>
<blockquote>
<div><p>The linear size of the lenslet array (&gt;=1)</p>
</div></blockquote>
<p><strong>N_SOURCE</strong> : int, optionnal</p>
<blockquote class="last">
<div><p>The number of guide stars (&gt;=1); default: 1</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>class acting as the interface between GPU host and device</dd>
</dl>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>N_SIDE_LENSLET</td>
<td>(int) The linear size of the lenslet array (&gt;=1)</td>
</tr>
<tr class="row-even"><td>N_SOURCE</td>
<td>(int) The number of guide stars (&gt;=1)</td>
</tr>
<tr class="row-odd"><td>c: cuFloatArray</td>
<td>The centroid vector of length <a href="#id2"><span class="problematic" id="id3">`</span></a>N_SOURCE`x`N_SIDE_LENSLET`**2</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">fried_geometry</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="shackhartmann">
<h2>ShackHartmann<a class="headerlink" href="#shackhartmann" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="ceo.ShackHartmann">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">ShackHartmann</tt><a class="headerlink" href="#ceo.ShackHartmann" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a shackHartmann object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>N_SIDE_LENSLET</strong> : int</p>
<blockquote>
<div><p>The linear size of the lenslet array (&gt;=1).</p>
</div></blockquote>
<p><strong>N_PX_LENSLET</strong> : int</p>
<blockquote>
<div><p>The sampling in pixel of one lenslet.</p>
</div></blockquote>
<p><strong>d</strong> : float</p>
<blockquote>
<div><p>The lenslet pitch [m].</p>
</div></blockquote>
<p><strong>DFT_osf</strong> : int, optionnal</p>
<blockquote>
<div><p>The oversampling factor for the Discrete Fourier Transform, defaults to 2</p>
</div></blockquote>
<p><strong>N_PX_IMAGE</strong> : int, optionnal</p>
<blockquote>
<div><p>The sampling in pixel of the imagelet, defaults to N_PX_LENSLET</p>
</div></blockquote>
<p><strong>BIN_IMAGE</strong> : int, optionnal</p>
<blockquote>
<div><p>The binning factor of the imagelet, default to 1</p>
</div></blockquote>
<p><strong>N_GS</strong> : int, optionnal</p>
<blockquote class="last">
<div><p>The number of guide stars, defaults to 1</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.MaskAbstract" title="ceo.MaskAbstract"><tt class="xref py py-obj docutils literal"><span class="pre">MaskAbstract</span></tt></a></dt>
<dd>a class to hold masks properties</dd>
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>an interface class for GPU host and device float data</dd>
</dl>
</div>
<p class="rubric">Examples</p>
<p>A 30x30, 1m lenslet pitch, Nyquist sampled Shack-Hartmann WFS with 8x8 pixel per lenslet is created with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wfs</span> <span class="o">=</span> <span class="n">ShackHartmann</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mf">1.0</span><span class="p">)</span>
</pre></div>
</div>
<p>The detector resolution is 240 pixels with a lenslet field of view of <span class="math">\(8\lambda / 2d\)</span>.</p>
<p>Twice the Nyquist sampling is realized with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wfs</span> <span class="o">=</span> <span class="n">ShackHartmann</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span><span class="n">DFT_osf</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>The detector resolution is still 240 pixels but with a lenslet field of view of <span class="math">\(8\lambda / 4d\)</span>.</p>
<p>Half the Nyquist sampling is obtained with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wfs</span> <span class="o">=</span> <span class="n">ShackHartmann</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">BIN_IMAGE</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>The detector resolution is now 120 pixels with a lenslet field of view of <span class="math">\(4\lambda / d\)</span>.
A 240 pixels detector resolution is restored with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wfs</span> <span class="o">=</span> <span class="n">ShackHartmann</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">N_PX_IMAGE</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">BIN_IMAGE</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>increasing the field of view by a factor 2 i.e. <span class="math">\(8\lambda / d\)</span>.</p>
<p>The number of guide star needs to be passed if larger than 1:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">wfs</span> <span class="o">=</span> <span class="n">ShackHartmann</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">N_GS</span><span class="o">=</span><span class="mi">6</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>N_SIDE_LENSLET</td>
<td>(int) The linear size of the lenslet array (&gt;=1).</td>
</tr>
<tr class="row-even"><td>N_PX_LENSLET</td>
<td>(int) The sampling in pixel of one lenslet.</td>
</tr>
<tr class="row-odd"><td>DFT_osf</td>
<td>(int) The oversampling factor for the Discrete Fourier Transform</td>
</tr>
<tr class="row-even"><td>N_PX_IMAGE</td>
<td>(int) The sampling in pixel of the imagelet</td>
</tr>
<tr class="row-odd"><td>BIN_IMAGE</td>
<td>(int) The binning factor of the imagelet</td>
</tr>
<tr class="row-even"><td>N_GS</td>
<td>(int) The number of guide stars</td>
</tr>
<tr class="row-odd"><td>N_PX_FRAME</td>
<td>(int) The detector resolution</td>
</tr>
<tr class="row-even"><td>valid_lenslet</td>
<td>(MaskAbstract) The mask object representing the valid lenslet location</td>
</tr>
<tr class="row-odd"><td>valid_actuator</td>
<td>(MaskAbstract) The mask object representing the valid actuator location in a Fried geometry</td>
</tr>
<tr class="row-even"><td>n_valid_lenslet</td>
<td>(int) The number of valid lenslet</td>
</tr>
<tr class="row-odd"><td>n_valid_slopes</td>
<td>(int) The number of valid slopes</td>
</tr>
<tr class="row-even"><td>pixel_scale</td>
<td>(float) The size of the detector pixel in radian</td>
</tr>
<tr class="row-odd"><td>pixel_scale_arcsec</td>
<td>(float) The size of the detector pixel in arcsec</td>
</tr>
<tr class="row-even"><td>frame</td>
<td>(cuFloatArray) The detector frame</td>
</tr>
<tr class="row-odd"><td>c0</td>
<td>(cuFloatArray) The reference slopes vector as [N_GSx2 N_SIDE_LENSLET**2]</td>
</tr>
<tr class="row-even"><td>c</td>
<td>(cuFloatArray) The slopes vector as [N_GSx2 N_SIDE_LENSLET**2]</td>
</tr>
<tr class="row-odd"><td>flux</td>
<td>(cuFloatArray) The map of flux per lenset</td>
</tr>
<tr class="row-even"><td>valid_slopes</td>
<td>(cuFloatArray) The vector of valid slopes</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ShackHartmann.analyze" title="ceo.ShackHartmann.analyze"><tt class="xref py py-obj docutils literal"><span class="pre">analyze</span></tt></a></td>
<td>Propagates the guide star to the WFS detector (noiseless) and processes the frame</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.ShackHartmann.calibrate" title="ceo.ShackHartmann.calibrate"><tt class="xref py py-obj docutils literal"><span class="pre">calibrate</span></tt></a></td>
<td>Selects the WFS valid lenslet and calibrated the reference slopes</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ShackHartmann.pointing" title="ceo.ShackHartmann.pointing"><tt class="xref py py-obj docutils literal"><span class="pre">pointing</span></tt></a></td>
<td>Sets the pointing of the WFS relative to the guide star</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.ShackHartmann.process" title="ceo.ShackHartmann.process"><tt class="xref py py-obj docutils literal"><span class="pre">process</span></tt></a></td>
<td>Processes the WFS detector frame</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ShackHartmann.propagate" title="ceo.ShackHartmann.propagate"><tt class="xref py py-obj docutils literal"><span class="pre">propagate</span></tt></a></td>
<td>Propagates the guide star to the WFS detector (noiseless)</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.ShackHartmann.readOut" title="ceo.ShackHartmann.readOut"><tt class="xref py py-obj docutils literal"><span class="pre">readOut</span></tt></a></td>
<td>Reads-out the WFS detector frame adding photon and read-out noises</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ShackHartmann.reset" title="ceo.ShackHartmann.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Resets the WFS detector frame to 0</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.ShackHartmann.analyze">
<tt class="descname">analyze</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.analyze" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagates the guide star to the WFS detector (noiseless) and processes the frame</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gs</strong> : Source</p>
<blockquote class="last">
<div><p>The WFS guide star</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.calibrate">
<tt class="descname">calibrate</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.calibrate" title="Permalink to this definition">¶</a></dt>
<dd><p>Selects the WFS valid lenslet and calibrated the reference slopes</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gs</strong> : Source</p>
<blockquote>
<div><p>The WFS guide star</p>
</div></blockquote>
<p><strong>threshold</strong> : float</p>
<blockquote class="last">
<div><p>The intensity threshold, a lenslet is discared if the flux of the lenslet divided by the fully illuminated flux of the lenslet is less than the threshold</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.pointing">
<tt class="descname">pointing</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.pointing" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the pointing of the WFS relative to the guide star</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>zen</strong> : float</p>
<blockquote>
<div><p>The zenith angle [rd]</p>
</div></blockquote>
<p><strong>azim</strong> : float</p>
<blockquote class="last">
<div><p>The azimuth angle [rd]</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.process">
<tt class="descname">process</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the WFS detector frame</p>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.propagate">
<tt class="descname">propagate</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.propagate" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagates the guide star to the WFS detector (noiseless)</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>gs</strong> : Source</p>
<blockquote class="last">
<div><p>The WFS guide star</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Source" title="ceo.Source"><tt class="xref py py-obj docutils literal"><span class="pre">Source</span></tt></a></dt>
<dd>a class for astronomical sources</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.readOut">
<tt class="descname">readOut</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.readOut" title="Permalink to this definition">¶</a></dt>
<dd><p>Reads-out the WFS detector frame adding photon and read-out noises</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>exposureTime</strong> : float</p>
<blockquote>
<div><p>The detector integration time [s]</p>
</div></blockquote>
<p><strong>readoutNoiseRms</strong> : float</p>
<blockquote class="last">
<div><p>The rms of the detector read-out noise</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.ShackHartmann.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ShackHartmann.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the WFS detector frame to 0</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="raytracing">
<h2>rayTracing<a class="headerlink" href="#raytracing" title="Permalink to this headline">¶</a></h2>
<div class="section" id="bundle">
<h3>Bundle<a class="headerlink" href="#bundle" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.Bundle">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Bundle</tt><a class="headerlink" href="#ceo.Bundle" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent a bundle of rays</p>
<p>This class is usually instanciated by the Source class</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>src</strong> : Source</p>
<blockquote class="last">
<div><p>The Source object that contains the pointer to CEO bundle structure</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>N_BUNDLE</td>
<td>(int, read only) The number of ray bundle</td>
</tr>
<tr class="row-even"><td>coordinates</td>
<td>(cuDoubleArray, read only) The coordinate vectors of the rays as a (N_RAYxN_BUNDLE)x3 array</td>
</tr>
<tr class="row-odd"><td>chief_coordinates</td>
<td>(cuDoubleArray, read only) The coordinate vector of the chief ray</td>
</tr>
<tr class="row-even"><td>directions</td>
<td>(cuDoubleArray, read only) The direction vectors of the rays as a (N_RAYxN_BUNDLE)x3 array</td>
</tr>
<tr class="row-odd"><td>chief_directions</td>
<td>(cuDoubleArray, read only) The direction vector of the chief ray</td>
</tr>
<tr class="row-even"><td>optical_path_length</td>
<td>(cuDoubleArray, read only) The optical path lengths of the rays as a N_BUNDLExN_RAY array</td>
</tr>
<tr class="row-odd"><td>chief_optical_path_length</td>
<td>(cuDoubleArray, read only) The optical path length  of the chief ray</td>
</tr>
<tr class="row-even"><td>optical_path_difference</td>
<td>(cuDoubleArray, read only) The optical path differences of the rays as a N_BUNDLExN_RAY array</td>
</tr>
<tr class="row-odd"><td>vignetting</td>
<td>(cuDoubleArray, read only) The vignetting flag of the rays as a N_BUNDLExN_RAY array</td>
</tr>
<tr class="row-even"><td>sphere_radius</td>
<td>(cuDoubleArray, read only) The radius of the reference sphere used to compute the optical path difference</td>
</tr>
<tr class="row-odd"><td>sphere_distance</td>
<td>(cuDoubleArray, read only) The distance from the last surface to the reference sphere used to compute the optical path difference</td>
</tr>
<tr class="row-even"><td>piston_mask</td>
<td>(numpy ndarray) A 7 columns array where each column is a mask corresponding to 1 segment</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Bundle.ee80" title="ceo.Bundle.ee80"><tt class="xref py py-obj docutils literal"><span class="pre">ee80</span></tt></a></td>
<td>Computes the size of the geometric EE80 square</td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">get_optical_path_difference</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">to_focal_plane</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.Bundle.to_sphere" title="ceo.Bundle.to_sphere"><tt class="xref py py-obj docutils literal"><span class="pre">to_sphere</span></tt></a></td>
<td>Computes the optical path difference with respect to the reference sphere</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.Bundle.to_z_plane" title="ceo.Bundle.to_z_plane"><tt class="xref py py-obj docutils literal"><span class="pre">to_z_plane</span></tt></a></td>
<td>Propagates the rays to a given plane</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.Bundle.ee80">
<tt class="descname">ee80</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Bundle.ee80" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the size of the geometric EE80 square</p>
<dl class="docutils">
<dt>float</dt>
<dd>The size of the geometric EE80 square in radian</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="ceo.Bundle.to_sphere">
<tt class="descname">to_sphere</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Bundle.to_sphere" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the optical path difference with respect to the reference sphere</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>sphere_origin</strong> : list of double, optional</p>
<blockquote>
<div><p>A 3 elements list containing the x,y and z coordinates of the sphere center; default: None</p>
</div></blockquote>
<p><strong>focal_plane_distance</strong> : double, optional</p>
<blockquote>
<div><p>The location of the focal plane on the optical axis; default: 0.0</p>
</div></blockquote>
<p><strong>focal_plane_radius</strong> : double, optional</p>
<blockquote class="last">
<div><p>The radius of curvature of the focal plane; default: 0.0</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.Bundle.to_z_plane">
<tt class="descname">to_z_plane</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.Bundle.to_z_plane" title="Permalink to this definition">¶</a></dt>
<dd><p>Propagates the rays to a given plane</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>z_plane</strong> : double</p>
<blockquote class="last">
<div><p>The z coordinates of the plane</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="zernikes">
<h3>ZernikeS<a class="headerlink" href="#zernikes" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.ZernikeS">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">ZernikeS</tt><a class="headerlink" href="#ceo.ZernikeS" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent a surface as the weighted sum of Zernike polynomials</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>max_n</strong> : int</p>
<blockquote>
<div><p>The largest of the radial orders</p>
</div></blockquote>
<p><strong>n_mode</strong> : int</p>
<blockquote>
<div><p>The total number of Zernike modes</p>
</div></blockquote>
<p><strong>N_SURF</strong> : int</p>
<blockquote>
<div><p>The number of Zernike surfaces</p>
</div></blockquote>
<p><strong>a</strong> : ndarray</p>
<blockquote class="last">
<div><p>The Zernike polynomial coefficients as a N_SURFxn_modes array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">matplotlib</span> <span class="kn">as</span> <span class="nn">plt</span>
</pre></div>
</div>
<p>Lets define a Zernike surface made of the first 15 Zernike polynomials (4th radial order)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">ZernikeS</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>and setting it to be a pure focus mode:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="o">.</span><span class="n">a</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Z</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
</pre></div>
</div>
<p>The surface is computed with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">npx</span> <span class="o">=</span> <span class="mi">512</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="n">npx</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="p">,</span><span class="n">y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">u</span><span class="p">,</span><span class="n">u</span><span class="p">,</span> <span class="n">indexing</span><span class="o">=</span><span class="s">&#39;xy&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">r</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">hypot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">o</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arctan2</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="n">x</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cuo</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">cuDoubleArray</span><span class="p">(</span><span class="n">host_data</span><span class="o">=</span><span class="n">o</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cur</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">cuDoubleArray</span><span class="p">(</span><span class="n">host_data</span><span class="o">=</span><span class="n">r</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">S</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">surface</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span><span class="n">cuo</span><span class="p">)</span>
</pre></div>
</div>
<p>and its derivative with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">dSdx</span><span class="p">,</span><span class="n">dSdy</span><span class="p">)</span> <span class="o">=</span> <span class="n">Z</span><span class="o">.</span><span class="n">surface_derivatives</span><span class="p">(</span><span class="n">cur</span><span class="p">,</span><span class="n">cuo</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="p">,</span> <span class="p">(</span><span class="n">ax1</span><span class="p">,</span><span class="n">ax2</span><span class="p">,</span><span class="n">ax3</span><span class="p">)</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">ncols</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span><span class="n">sharey</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fig</span><span class="o">.</span><span class="n">set_size_inches</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span><span class="mf">4.5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h1</span> <span class="o">=</span> <span class="n">ax1</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">S</span><span class="o">.</span><span class="n">host</span><span class="p">(),</span><span class="n">interpolation</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s">&#39;lower&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h1</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h2</span> <span class="o">=</span> <span class="n">ax2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dSdx</span><span class="o">.</span><span class="n">host</span><span class="p">(),</span><span class="n">interpolation</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s">&#39;lower&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h2</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">h3</span> <span class="o">=</span> <span class="n">ax3</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">dSdy</span><span class="o">.</span><span class="n">host</span><span class="p">(),</span><span class="n">interpolation</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span><span class="n">origin</span><span class="o">=</span><span class="s">&#39;lower&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">plt</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">h3</span><span class="p">,</span><span class="n">ax</span><span class="o">=</span><span class="n">ax3</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">N_SURF</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">a</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">max_n</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">n_mode</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ZernikeS.projection" title="ceo.ZernikeS.projection"><tt class="xref py py-obj docutils literal"><span class="pre">projection</span></tt></a></td>
<td>IN PROGRESS...</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.ZernikeS.reset" title="ceo.ZernikeS.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Resets the Zernike coefficients to zero and update the Zernike surface</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ZernikeS.surface" title="ceo.ZernikeS.surface"><tt class="xref py py-obj docutils literal"><span class="pre">surface</span></tt></a></td>
<td>Computes the Zernike surface in polar coordinates</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.ZernikeS.surface_derivatives" title="ceo.ZernikeS.surface_derivatives"><tt class="xref py py-obj docutils literal"><span class="pre">surface_derivatives</span></tt></a></td>
<td>Computes the Zernike surface x and y derivatives in polar coordinates</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.ZernikeS.update" title="ceo.ZernikeS.update"><tt class="xref py py-obj docutils literal"><span class="pre">update</span></tt></a></td>
<td>Updates the Zernike surface based on the Zernike coefficients</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.ZernikeS.projection">
<tt class="descname">projection</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ZernikeS.projection" title="Permalink to this definition">¶</a></dt>
<dd><p>IN PROGRESS...</p>
</dd></dl>

<dl class="method">
<dt id="ceo.ZernikeS.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ZernikeS.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Resets the Zernike coefficients to zero and update the Zernike surface</p>
</dd></dl>

<dl class="method">
<dt id="ceo.ZernikeS.surface">
<tt class="descname">surface</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ZernikeS.surface" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Zernike surface in polar coordinates</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>r</strong> : cuDoubleArray</p>
<blockquote>
<div><p>The normalized radius</p>
</div></blockquote>
<p><strong>o</strong> : cuDoubleArray</p>
<blockquote>
<div><p>The azimuth</p>
</div></blockquote>
<p><strong>surf_id</strong> : int, optionnal</p>
<blockquote>
<div><p>The surface index; default: 0</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>S</strong> : cuDoubleArray</p>
<blockquote class="last">
<div><p>The Zernike surface</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.ZernikeS.surface_derivatives">
<tt class="descname">surface_derivatives</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ZernikeS.surface_derivatives" title="Permalink to this definition">¶</a></dt>
<dd><p>Computes the Zernike surface x and y derivatives in polar coordinates</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>r</strong> : cuDoubleArray</p>
<blockquote>
<div><p>The normalized radius</p>
</div></blockquote>
<p><strong>o</strong> : cuDoubleArray</p>
<blockquote>
<div><p>The azimuth</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dSdx</strong> : cuDoubleArray</p>
<blockquote>
<div><p>The Zernike surface x derivative</p>
</div></blockquote>
<p><strong>dSdy</strong> : cuDoubleArray</p>
<blockquote class="last">
<div><p>The Zernike surface y derivative</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.ZernikeS.update">
<tt class="descname">update</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.ZernikeS.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the Zernike surface based on the Zernike coefficients</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gmt-m1">
<h3>GMT M1<a class="headerlink" href="#gmt-m1" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.GMT_M1">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">GMT_M1</tt><a class="headerlink" href="#ceo.GMT_M1" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent GMT M1 or M2 segmented mirror</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>D</strong> : float</p>
<blockquote>
<div><p>The size in meter of the pupil plane (must be equal or larger than the telescope diameter)</p>
</div></blockquote>
<p><strong>D_px</strong> : float</p>
<blockquote>
<div><p>The size in pxixel of the pupil plane</p>
</div></blockquote>
<p><strong>radial_order</strong> : int, optionnal</p>
<blockquote class="last">
<div><p>The radial order of the last Zernike polynomials, default to 0</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M1</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
</pre></div>
</div>
<p>With multiple sources:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M2</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="n">N_SRC</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>With Zernike modes</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M1</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="n">radial_order</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>An M1 segment (#2) is displaced in x of 2 micron and tilted in y of 50mas with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="mf">50e-3</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">/</span><span class="mi">3600</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">[</span><span class="mf">2e-6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">euler_angles</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>A global tip-tilt of M1 is achieved with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span><span class="o">.</span><span class="n">global_tiptilt</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<p>M2 pointing neutral and coma neutral tip-tilt are realized with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span><span class="o">.</span><span class="n">pointing_neutral</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span><span class="o">.</span><span class="n">coma_neutral</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_assembly</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_clear</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_full</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">L</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">M_ID</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">TT_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">aperture_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_c</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_k</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">motion_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">rigid_body_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">zernike</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_M1.blocking" title="ceo.GMT_M1.blocking"><tt class="xref py py-obj docutils literal"><span class="pre">blocking</span></tt></a></td>
<td>Makes the mirror acting as a stop</td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">edge_sensors</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_M1.global_tiptilt" title="ceo.GMT_M1.global_tiptilt"><tt class="xref py py-obj docutils literal"><span class="pre">global_tiptilt</span></tt></a></td>
<td>Applies a global tip&#8211;tilt to M1</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M1.reset" title="ceo.GMT_M1.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Reset the segments to their original prescription</td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">test</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M1.trace" title="ceo.GMT_M1.trace"><tt class="xref py py-obj docutils literal"><span class="pre">trace</span></tt></a></td>
<td>Ray tracing to the mirror</td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">track</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M1.update" title="ceo.GMT_M1.update"><tt class="xref py py-obj docutils literal"><span class="pre">update</span></tt></a></td>
<td>Updates the position of the mirror segments</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.GMT_M1.blocking">
<tt class="descname">blocking</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M1.blocking" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes the mirror acting as a stop</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rays</strong> : Bundle</p>
<blockquote class="last">
<div><p>A ray bundle used to propagate the light</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Bundle" title="ceo.Bundle"><tt class="xref py py-obj docutils literal"><span class="pre">Bundle</span></tt></a></dt>
<dd>a class representing a bundle of light rays used for geometric propagation</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M1.global_tiptilt">
<tt class="descname">global_tiptilt</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M1.global_tiptilt" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a global tip&#8211;tilt to M1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tip</strong> : float</p>
<blockquote>
<div><p>The x axis angle</p>
</div></blockquote>
<p><strong>tilt</strong> : float</p>
<blockquote class="last">
<div><p>The y axis angle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M1.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M1.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the segments to their original prescription</p>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M1.trace">
<tt class="descname">trace</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M1.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Ray tracing to the mirror</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rays</strong> : Bundle</p>
<blockquote class="last">
<div><p>A ray bundle used to propagate the light</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Bundle" title="ceo.Bundle"><tt class="xref py py-obj docutils literal"><span class="pre">Bundle</span></tt></a></dt>
<dd>a class representing a bundle of light rays used for geometric propagation</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M1.update">
<tt class="descname">update</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M1.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the position of the mirror segments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>origin</strong> : list of float, optionnal</p>
<blockquote>
<div><p>The location of a segment center; default: [0,0,0]</p>
</div></blockquote>
<p><strong>euler_angles</strong> : list of float, optionnal</p>
<blockquote>
<div><p>The tip, tilt and clock angles of a segment; default: [0,0,0]</p>
</div></blockquote>
<p><strong>idx</strong> : int</p>
<blockquote class="last">
<div><p>The segment index from 1 to 7</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="gmt-m2">
<h3>GMT M2<a class="headerlink" href="#gmt-m2" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.GMT_M2">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">GMT_M2</tt><a class="headerlink" href="#ceo.GMT_M2" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to represent GMT M1 or M2 segmented mirror</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>D</strong> : float</p>
<blockquote>
<div><p>The size in meter of the pupil plane (must be equal or larger than the telescope diameter)</p>
</div></blockquote>
<p><strong>D_px</strong> : float</p>
<blockquote>
<div><p>The size in pxixel of the pupil plane</p>
</div></blockquote>
<p><strong>radial_order</strong> : int, optionnal</p>
<blockquote class="last">
<div><p>The radial order of the last Zernike polynomials, default to 0</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ceo</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M1</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">)</span>
</pre></div>
</div>
<p>With multiple sources:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M2</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="n">N_SRC</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>With Zernike modes</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span> <span class="o">=</span> <span class="n">ceo</span><span class="o">.</span><span class="n">GMT_M1</span><span class="p">(</span><span class="mf">25.5</span><span class="p">,</span><span class="mi">101</span><span class="p">,</span><span class="n">radial_order</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
</pre></div>
</div>
<p>An M1 segment (#2) is displaced in x of 2 micron and tilted in y of 50mas with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">theta</span> <span class="o">=</span> <span class="mf">50e-3</span><span class="o">*</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">180</span><span class="o">/</span><span class="mi">3600</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">origin</span><span class="o">=</span><span class="p">[</span><span class="mf">2e-6</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">euler_angles</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="n">theta</span><span class="p">,</span><span class="mi">0</span><span class="p">],</span><span class="n">idx</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
<p>A global tip-tilt of M1 is achieved with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M1</span><span class="o">.</span><span class="n">global_tiptilt</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<p>M2 pointing neutral and coma neutral tip-tilt are realized with</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span><span class="o">.</span><span class="n">pointing_neutral</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">M2</span><span class="o">.</span><span class="n">coma_neutral</span><span class="p">(</span><span class="n">theta</span><span class="p">,</span><span class="o">-</span><span class="n">theta</span><span class="p">)</span>
</pre></div>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_assembly</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_clear</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">D_full</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">L</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">M_ID</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">TT_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">aperture_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_c</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">conic_k</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">motion_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">rigid_body_CS</span></tt></td>
<td></td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">zernike</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_M2.blocking" title="ceo.GMT_M2.blocking"><tt class="xref py py-obj docutils literal"><span class="pre">blocking</span></tt></a></td>
<td>Makes the mirror acting as a stop</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M2.coma_neutral" title="ceo.GMT_M2.coma_neutral"><tt class="xref py py-obj docutils literal"><span class="pre">coma_neutral</span></tt></a></td>
<td>Applies a coma neutral global tip&#8211;tilt to M2</td>
</tr>
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">edge_sensors</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M2.global_tiptilt" title="ceo.GMT_M2.global_tiptilt"><tt class="xref py py-obj docutils literal"><span class="pre">global_tiptilt</span></tt></a></td>
<td>Applies a global tip&#8211;tilt to M1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_M2.pointing_neutral" title="ceo.GMT_M2.pointing_neutral"><tt class="xref py py-obj docutils literal"><span class="pre">pointing_neutral</span></tt></a></td>
<td>Applies a pointing neutral global tip&#8211;tilt to M2</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M2.reset" title="ceo.GMT_M2.reset"><tt class="xref py py-obj docutils literal"><span class="pre">reset</span></tt></a></td>
<td>Reset the segments to their original prescription</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#ceo.GMT_M2.trace" title="ceo.GMT_M2.trace"><tt class="xref py py-obj docutils literal"><span class="pre">trace</span></tt></a></td>
<td>Ray tracing to the mirror</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.GMT_M2.update" title="ceo.GMT_M2.update"><tt class="xref py py-obj docutils literal"><span class="pre">update</span></tt></a></td>
<td>Updates the position of the mirror segments</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.GMT_M2.blocking">
<tt class="descname">blocking</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.blocking" title="Permalink to this definition">¶</a></dt>
<dd><p>Makes the mirror acting as a stop</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rays</strong> : Bundle</p>
<blockquote class="last">
<div><p>A ray bundle used to propagate the light</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Bundle" title="ceo.Bundle"><tt class="xref py py-obj docutils literal"><span class="pre">Bundle</span></tt></a></dt>
<dd>a class representing a bundle of light rays used for geometric propagation</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.coma_neutral">
<tt class="descname">coma_neutral</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.coma_neutral" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a coma neutral global tip&#8211;tilt to M2</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tip</strong> : float</p>
<blockquote>
<div><p>The x axis angle</p>
</div></blockquote>
<p><strong>tilt</strong> : float</p>
<blockquote class="last">
<div><p>The y axis angle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.global_tiptilt">
<tt class="descname">global_tiptilt</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.global_tiptilt" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a global tip&#8211;tilt to M1</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tip</strong> : float</p>
<blockquote>
<div><p>The x axis angle</p>
</div></blockquote>
<p><strong>tilt</strong> : float</p>
<blockquote class="last">
<div><p>The y axis angle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.pointing_neutral">
<tt class="descname">pointing_neutral</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.pointing_neutral" title="Permalink to this definition">¶</a></dt>
<dd><p>Applies a pointing neutral global tip&#8211;tilt to M2</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>tip</strong> : float</p>
<blockquote>
<div><p>The x axis angle</p>
</div></blockquote>
<p><strong>tilt</strong> : float</p>
<blockquote class="last">
<div><p>The y axis angle</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.reset">
<tt class="descname">reset</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Reset the segments to their original prescription</p>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.trace">
<tt class="descname">trace</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.trace" title="Permalink to this definition">¶</a></dt>
<dd><p>Ray tracing to the mirror</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>rays</strong> : Bundle</p>
<blockquote class="last">
<div><p>A ray bundle used to propagate the light</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.Bundle" title="ceo.Bundle"><tt class="xref py py-obj docutils literal"><span class="pre">Bundle</span></tt></a></dt>
<dd>a class representing a bundle of light rays used for geometric propagation</dd>
</dl>
</div>
</dd></dl>

<dl class="method">
<dt id="ceo.GMT_M2.update">
<tt class="descname">update</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.GMT_M2.update" title="Permalink to this definition">¶</a></dt>
<dd><p>Updates the position of the mirror segments</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>origin</strong> : list of float, optionnal</p>
<blockquote>
<div><p>The location of a segment center; default: [0,0,0]</p>
</div></blockquote>
<p><strong>euler_angles</strong> : list of float, optionnal</p>
<blockquote>
<div><p>The tip, tilt and clock angles of a segment; default: [0,0,0]</p>
</div></blockquote>
<p><strong>idx</strong> : int</p>
<blockquote class="last">
<div><p>The segment index from 1 to 7</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
<div class="section" id="utilities">
<h2>utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h2>
<div class="section" id="mask">
<h3>mask<a class="headerlink" href="#mask" title="Permalink to this headline">¶</a></h3>
<div class="section" id="maskabstract">
<h4>MaskAbstract<a class="headerlink" href="#maskabstract" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.MaskAbstract">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">MaskAbstract</tt><a class="headerlink" href="#ceo.MaskAbstract" title="Permalink to this definition">¶</a></dt>
<dd><p>The abstract class for all other mask classes</p>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<dl class="last docutils">
<dt><a class="reference internal" href="#ceo.cuFloatArray" title="ceo.cuFloatArray"><tt class="xref py py-obj docutils literal"><span class="pre">cuFloatArray</span></tt></a></dt>
<dd>an interface for GPU host and device float data</dd>
</dl>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="94%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>f</td>
<td>(cuFloatArray) the mask as a float array</td>
</tr>
<tr class="row-even"><td>nnz</td>
<td>(int) the number of non zeros values in the mask</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="id4">
<h4>Mask<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.Mask">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Mask</tt><a class="headerlink" href="#ceo.Mask" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a square mask object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>n</strong> : an int</p>
<blockquote>
<div><p>the linear sampling in pixel of the pupil</p>
</div></blockquote>
<p><strong>L</strong> : float</p>
<blockquote>
<div><p>the linear size of the mask in meter</p>
</div></blockquote>
<p><strong>i_s</strong> : float, optionnal</p>
<blockquote>
<div><p>the row pixel coordinate of the mask center, default: 0</p>
</div></blockquote>
<p><strong>j_s</strong> : float, optionnal</p>
<blockquote class="last">
<div><blockquote>
<div><p>the column pixel coordinate of the mask center, default: 0</p>
</div></blockquote>
<dl class="docutils">
<dt>n_s <span class="classifier-delimiter">:</span> <span class="classifier">float, optionnal</span></dt>
<dd><p class="first last">the mask size in pixel, default: 0 means n_s=n</p>
</dd>
<dt>theta <span class="classifier-delimiter">:</span> <span class="classifier">float</span></dt>
<dd><p class="first last">the rotation angle [rd] of the mask with respect to i_s and j_s, default: 0</p>
</dd>
</dl>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ceo.MaskAbstract" title="ceo.MaskAbstract"><tt class="xref py py-obj docutils literal"><span class="pre">MaskAbstract</span></tt></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">f</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">nnz</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="telescope">
<h4>Telescope<a class="headerlink" href="#telescope" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.Telescope">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">Telescope</tt><a class="headerlink" href="#ceo.Telescope" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a circular mask object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>n</strong> : int</p>
<blockquote>
<div><p>the sampling in pixel of the pupil.</p>
</div></blockquote>
<p><strong>D</strong> : float</p>
<blockquote class="last">
<div><p>the diamter in meter of the pupil</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ceo.MaskAbstract" title="ceo.MaskAbstract"><tt class="xref py py-obj docutils literal"><span class="pre">MaskAbstract</span></tt></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">f</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">nnz</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="gmt">
<h4>GMT<a class="headerlink" href="#gmt" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.GMT">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">GMT</tt><a class="headerlink" href="#ceo.GMT" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a mask object for the Giant Magellan Telescope pupil.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>n</strong> : int</p>
<blockquote>
<div><p>The sampling in pixel of the pupil.</p>
</div></blockquote>
<p><strong>S</strong> : float</p>
<blockquote class="last">
<div><p>The size of the pupil in meter.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#ceo.MaskAbstract" title="ceo.MaskAbstract"><tt class="xref py py-obj docutils literal"><span class="pre">MaskAbstract</span></tt></a></p>
</div>
<p class="rubric">Attributes</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><tt class="xref py py-obj docutils literal"><span class="pre">f</span></tt></td>
<td></td>
</tr>
<tr class="row-even"><td><tt class="xref py py-obj docutils literal"><span class="pre">nnz</span></tt></td>
<td></td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
<div class="section" id="stopwatch">
<h3>StopWatch<a class="headerlink" href="#stopwatch" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="ceo.StopWatch">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">StopWatch</tt><a class="headerlink" href="#ceo.StopWatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a stopwatch object to time cuda based routines</p>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>elapsedTime</td>
<td>(float) The time elapsed between a tic() and a toc() calls</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.StopWatch.tic" title="ceo.StopWatch.tic"><tt class="xref py py-obj docutils literal"><span class="pre">tic</span></tt></a></td>
<td>Starts the stopwatch</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#ceo.StopWatch.toc" title="ceo.StopWatch.toc"><tt class="xref py py-obj docutils literal"><span class="pre">toc</span></tt></a></td>
<td>Stops the stopwatch</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.StopWatch.tic">
<tt class="descname">tic</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.StopWatch.tic" title="Permalink to this definition">¶</a></dt>
<dd><p>Starts the stopwatch</p>
</dd></dl>

<dl class="method">
<dt id="ceo.StopWatch.toc">
<tt class="descname">toc</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.StopWatch.toc" title="Permalink to this definition">¶</a></dt>
<dd><p>Stops the stopwatch</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cuda-array">
<h3>CUDA array<a class="headerlink" href="#cuda-array" title="Permalink to this headline">¶</a></h3>
<div class="section" id="cufloatarray">
<h4>cuFloatArray<a class="headerlink" href="#cufloatarray" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.cuFloatArray">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">cuFloatArray</tt><a class="headerlink" href="#ceo.cuFloatArray" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to interact with a cuda float array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple of int, optionnal</p>
<blockquote>
<div><p>Number of rows and colums; default: None</p>
</div></blockquote>
<p><strong>host_data</strong> : list or tuple or numpy array, optionnal</p>
<blockquote>
<div><p>Host data to copy to the device; default: None</p>
</div></blockquote>
<p><strong>dev_malloc</strong> : bool, optionnal</p>
<blockquote class="last">
<div><p>Flag to allocate memory on device; default: False</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>size</td>
<td>(int) The total number of element</td>
</tr>
<tr class="row-even"><td>shape</td>
<td>(tuple) The shape of the data array</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>(float) The number of elements in the data array</td>
</tr>
<tr class="row-even"><td>host_data</td>
<td>(ndarray) The data on the host</td>
</tr>
<tr class="row-odd"><td>dev_malloc</td>
<td>(bool) True is memory has been allocated on the device</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.cuFloatArray.host" title="ceo.cuFloatArray.host"><tt class="xref py py-obj docutils literal"><span class="pre">host</span></tt></a></td>
<td>Transfers data on the GPU device to the memory of the host</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.cuFloatArray.host">
<tt class="descname">host</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.cuFloatArray.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers data on the GPU device to the memory of the host</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple, optionnal</p>
<blockquote>
<div><p>The shape of the data array, default to None</p>
</div></blockquote>
<p><strong>units</strong> : string, optionnal</p>
<blockquote>
<div><p>The data converstion units: &#8220;&#8221;micron&#8221;&#8221;, &#8220;&#8221;nm&#8221;&#8221;, &#8220;&#8221;arcsec&#8221; and &#8220;&#8221;mas&#8221;&#8221;, default to None</p>
</div></blockquote>
<p><strong>zm</strong> : boolean, optionnal</p>
<blockquote>
<div><p>If True, the data mean is removed; default to False</p>
</div></blockquote>
<p><strong>mask</strong> : boolean</p>
<blockquote>
<div><p>If zm is True, the mean is computed for data values where the mask is True</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>numpy array</strong> : a copy of the device data on the host</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cudoublearray">
<h4>cuDoubleArray<a class="headerlink" href="#cudoublearray" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.cuDoubleArray">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">cuDoubleArray</tt><a class="headerlink" href="#ceo.cuDoubleArray" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to interact with a cuda double array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple of int, optionnal</p>
<blockquote>
<div><p>Number of rows and colums; default: None</p>
</div></blockquote>
<p><strong>host_data</strong> : list or tuple or numpy array, optionnal</p>
<blockquote>
<div><p>Host data to copy to the device; default: None</p>
</div></blockquote>
<p><strong>dev_malloc</strong> : bool, optionnal</p>
<blockquote class="last">
<div><p>Flag to allocate memory on device; default: False</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>size</td>
<td>(int) The total number of element</td>
</tr>
<tr class="row-even"><td>shape</td>
<td>(tuple) The shape of the data array</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>(float) The number of elements in the data array</td>
</tr>
<tr class="row-even"><td>host_data</td>
<td>(ndarray) The data on the host</td>
</tr>
<tr class="row-odd"><td>dev_malloc</td>
<td>(bool) True is memory has been allocated on the device</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.cuDoubleArray.host" title="ceo.cuDoubleArray.host"><tt class="xref py py-obj docutils literal"><span class="pre">host</span></tt></a></td>
<td>Transfers data on the GPU device to the memory of the host</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.cuDoubleArray.host">
<tt class="descname">host</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.cuDoubleArray.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers data on the GPU device to the memory of the host</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple, optionnal</p>
<blockquote>
<div><p>The shape of the data array, default to None</p>
</div></blockquote>
<p><strong>units</strong> : string, optionnal</p>
<blockquote>
<div><p>The data converstion units: &#8220;&#8221;micron&#8221;&#8221;, &#8220;&#8221;nm&#8221;&#8221;, &#8220;&#8221;arcsec&#8221; and &#8220;&#8221;mas&#8221;&#8221;, default to None</p>
</div></blockquote>
<p><strong>zm</strong> : boolean, optionnal</p>
<blockquote>
<div><p>If True, the data mean is removed; default to False</p>
</div></blockquote>
<p><strong>mask</strong> : boolean</p>
<blockquote>
<div><p>If zm is True, the mean is computed for data values where the mask is True</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>numpy array</strong> : a copy of the device data on the host</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="cuintarray">
<h4>cuIntArray<a class="headerlink" href="#cuintarray" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="ceo.cuIntArray">
<em class="property">class </em><tt class="descclassname">ceo.</tt><tt class="descname">cuIntArray</tt><a class="headerlink" href="#ceo.cuIntArray" title="Permalink to this definition">¶</a></dt>
<dd><p>A class to interact with a cuda integer array</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple of int, optionnal</p>
<blockquote>
<div><p>Number of rows and colums; default: None</p>
</div></blockquote>
<p><strong>host_data</strong> : list or tuple or numpy array, optionnal</p>
<blockquote>
<div><p>Host data to copy to the device; default: None</p>
</div></blockquote>
<p><strong>dev_malloc</strong> : bool, optionnal</p>
<blockquote class="last">
<div><p>Flag to allocate memory on device; default: False</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="84%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>size</td>
<td>(int) The total number of element</td>
</tr>
<tr class="row-even"><td>shape</td>
<td>(tuple) The shape of the data array</td>
</tr>
<tr class="row-odd"><td>size</td>
<td>(float) The number of elements in the data array</td>
</tr>
<tr class="row-even"><td>host_data</td>
<td>(ndarray) The data on the host</td>
</tr>
<tr class="row-odd"><td>dev_malloc</td>
<td>(bool) True is memory has been allocated on the device</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#ceo.cuIntArray.host" title="ceo.cuIntArray.host"><tt class="xref py py-obj docutils literal"><span class="pre">host</span></tt></a></td>
<td>Transfers data on the GPU device to the memory of the host</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="ceo.cuIntArray.host">
<tt class="descname">host</tt><big>(</big><big>)</big><a class="headerlink" href="#ceo.cuIntArray.host" title="Permalink to this definition">¶</a></dt>
<dd><p>Transfers data on the GPU device to the memory of the host</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>shape</strong> : tuple, optionnal</p>
<blockquote>
<div><p>The shape of the data array, default to None</p>
</div></blockquote>
<p><strong>units</strong> : string, optionnal</p>
<blockquote>
<div><p>The data converstion units: &#8220;&#8221;micron&#8221;&#8221;, &#8220;&#8221;nm&#8221;&#8221;, &#8220;&#8221;arcsec&#8221; and &#8220;&#8221;mas&#8221;&#8221;, default to None</p>
</div></blockquote>
<p><strong>zm</strong> : boolean, optionnal</p>
<blockquote>
<div><p>If True, the data mean is removed; default to False</p>
</div></blockquote>
<p><strong>mask</strong> : boolean</p>
<blockquote>
<div><p>If zm is True, the mean is computed for data values where the mask is True</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>numpy array</strong> : a copy of the device data on the host</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>
<div class="section" id="indices-and-tables">
<h1>Indices and tables<a class="headerlink" href="#indices-and-tables" title="Permalink to this headline">¶</a></h1>
<ul class="simple">
<li><a class="reference internal" href="genindex.html"><em>Index</em></a></li>
<li><a class="reference internal" href="py-modindex.html"><em>Module Index</em></a></li>
<li><a class="reference internal" href="search.html"><em>Search Page</em></a></li>
</ul>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="#">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Cuda Engined Adaptive Optics</a><ul>
<li><a class="reference internal" href="#source">source</a><ul>
<li><a class="reference internal" href="#complex-amplitude">Complex_amplitude</a></li>
<li><a class="reference internal" href="#id1">Source</a></li>
</ul>
</li>
<li><a class="reference internal" href="#gmtlib">GMTLIB</a><ul>
<li><a class="reference internal" href="#gmt-mx">GMT_MX</a></li>
<li><a class="reference internal" href="#segmentpistonsensor">SegmentPistonSensor</a></li>
</ul>
</li>
<li><a class="reference internal" href="#imaging">Imaging</a></li>
<li><a class="reference internal" href="#centroiding">Centroiding</a></li>
<li><a class="reference internal" href="#shackhartmann">ShackHartmann</a></li>
<li><a class="reference internal" href="#raytracing">rayTracing</a><ul>
<li><a class="reference internal" href="#bundle">Bundle</a></li>
<li><a class="reference internal" href="#zernikes">ZernikeS</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#gmt-m1">GMT M1</a><ul>
</ul>
</li>
<li><a class="reference internal" href="#gmt-m2">GMT M2</a><ul>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#utilities">utilities</a><ul>
<li><a class="reference internal" href="#mask">mask</a><ul>
<li><a class="reference internal" href="#maskabstract">MaskAbstract</a></li>
<li><a class="reference internal" href="#id4">Mask</a></li>
<li><a class="reference internal" href="#telescope">Telescope</a></li>
<li><a class="reference internal" href="#gmt">GMT</a></li>
</ul>
</li>
<li><a class="reference internal" href="#stopwatch">StopWatch</a></li>
<li><a class="reference internal" href="#cuda-array">CUDA array</a><ul>
<li><a class="reference internal" href="#cufloatarray">cuFloatArray</a></li>
<li><a class="reference internal" href="#cudoublearray">cuDoubleArray</a></li>
<li><a class="reference internal" href="#cuintarray">cuIntArray</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#indices-and-tables">Indices and tables</a></li>
</ul>

  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/index.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li><a href="#">CEO 1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2015, R. Conan.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.2.3.
    </div>
  </body>
</html>